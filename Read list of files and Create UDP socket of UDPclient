def main():
    if len(sys.argv) != 4:
        print("Usage: python3 UDPclient.py <hostname> <port> <file_list>")
        sys.exit(1)

    hostname = sys.argv[1]
    port = int(sys.argv[2])
    file_list = sys.argv[3]

    # Read list of files
    try:
        with open(file_list, 'r') as f:
            files = [line.strip() for line in f if line.strip()]
    except FileNotFoundError:
        print(f"Error: File list {file_list} not found")
        sys.exit(1)

    # Create UDP socket
    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    try:
        for filename in files:
            if not download_file(sock, hostname, port, filename):
                print(f"Failed to download {filename}")
    finally:
        sock.close()

if __name__ == "__main__":
    main()
